Measurements with version 0.1
=============================
All times expressed in Zope Profiler in real time mode
(slower than reality, in a consistent manner, I hope)

Using the current sample theme on an almost empty portal.
All image, css resources didn't get loaded (browser cache or wget)

Warning: these measurements have been made at different stages of
the development, to see the global trends and check for obvious
bottlenecks. We didn't even take the time to ensure that the host
doesn't do anything else, so do not take them as proper scientific benchmarking.

Host: 2 GHz MacBook (july 2008 entry model)

View rendering of a news item document (page weight: 8.7 kB)
--------------------------------------
Total time : 440 ms  Actual time (time wget...): .137s

Total time spent in the engine (renderCompat)   : 170 ms
Time spent in CPSPortlets, lookup and rendering : 119 ms
Specific engine time                            :  51 ms
Of which, final serialization                   :  36 ms
Engine time without serialization		:  15 ms
For reference, doc.render()			: 130 ms

Edit rendering of same document (page weight: 20.5 kB)
-------------------------------
Everything looks to be called twice in the profiler, but isn't.
Probably a bug of the profiler itself, divide all profiler
figures by 2.

Total time : 1.2 s Actual time (time wget: ) : 190 ms

Total time spent in the engine (renderCompat)   : 351 ms
Time spent in CPSPortlets, lookup and rendering : 165 ms
Specific engine time                            : 186 ms
Of which, final serialization                   : 150 ms
Engine time without serialization		:  36 ms
Of which: initial parsing			:   1 ms
          URI rewriting				:   7 ms

Conclusion
----------
Apart from the switch to lxml, which is supposed
to be quicker at serialization, not much room for improvement
at this point.

Reparsing the theme each time is negligible. This might
change with ZODB themes


Performance on the CPSSkins exported CPS 3.4 theme
--------------------------------------------------
We are close to version 0.2.
This is still cElementTree

Total time: 610 ms
Actual time 170 ms (first try at 245 ms)

Total time spent in the engine (renderCompat)   : 316 ms
Time spent in CPSPortlets, lookup and rendering : 160 ms
Specific engine time                            : 256 ms
Of which, final serialization                   :  95 ms
Engine time without serialization		: 161 ms
Of which: initial parsing			:   1 ms
          URI rewriting				:  18 ms


Performance of TwoPhaseElementTreeEngine (CPS 3.4 theme)
--------------------------------------------------------

Total time: 558 ms
Actual time: 161 ms

Total time spent in the engine (renderCompat)   : 300 ms
Time spent in CPSPortlets, lookup and rendering : 176 ms
Specific engine time                            : 134 ms
Of which, portlets merging			:  20 ms
Of which, final serialization                   :  54 ms
Of which, second phase				:   0 ms
Engine time without serialization		:  80 ms


As we were hoping the serialisation is faster. The second phase runs
even in non measurable time

Performance of TwoPhaseElementTreeEngine (sample theme)
--------------------------------------------------------

Total time: 558 ms
Actual time: 122 ms

Total time spent in the engine (renderCompat)   : 100 ms
Time spent in CPSPortlets, lookup and rendering :  71 ms
Specific engine time                            :  29 ms
Of which, portlets merging			:   8 ms
Of which, final serialization                   :  17 ms
Of which, second phase				:   0 ms
Engine time without serialization		:  12 ms











